{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Karyathalo - Job Portal</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
    /* Modern, Professional Color Palette */
    :root {
        --primary-color: #007bff; /* Blue */
        --secondary-color: #6c757d; /* Gray */
        --dark-bg: #1e293b; /* Slate Dark */
        --light-text: #f8fafc;
        --accent-color: #34d399; /* Green Accent */
        --hover-color: #3b82f6;
    }

    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--light-text);
        margin: 0;
        padding: 0;
    }

    /* Sleek Header/Navbar */
    .app-header {
        background-color: var(--dark-bg);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); /* Subtle shadow */
    }

    /* Logo/Brand Area */
    .navbar-brand {
        font-family: 'Poppins', sans-serif;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--light-text) !important;
        transition: color 0.3s;
    }
    .navbar-brand:hover {
        color: var(--accent-color) !important;
    }
    .navbar-brand .logo-img {
        width: 40px; /* Small, modern logo size */
        height: auto;
        border-radius: 6px;
        margin-right: 10px;
    }

    /* Nav Links */
    .nav-link {
        color: var(--light-text) !important;
        font-size: 1rem;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 0.3rem;
        transition: background-color 0.3s, color 0.3s;
    }
    .nav-link:hover {
        background-color: var(--primary-color);
        color: white !important;
    }
    .nav-item .active-link {
        color: var(--accent-color) !important;
        border-bottom: 2px solid var(--accent-color);
    }

    /* Action Buttons (Login/Register) - Using modern utility classes */
    .btn-login {
        background-color: var(--primary-color);
        color: white;
        border: 1px solid var(--primary-color);
    }
    .btn-login:hover {
        background-color: var(--hover-color);
        border: 1px solid var(--hover-color);
    }

    /* Utility Bar (moved social links) */
    .utility-bar {
        background-color: #111827; /* Darker shade */
        padding: 5px 0;
    }
    .social-icons a {
        color: var(--light-text);
        font-size: 1.1rem;
        margin-left: 15px;
        transition: color 0.3s;
    }
    .social-icons a:hover {
        color: var(--accent-color);
        transform: translateY(-2px); /* Slight lift on hover */
    }
</style>

</head>
<body>

    <div class="utility-bar d-none d-lg-block">
        <div class="container d-flex justify-content-end align-items-center">
            <div class="social-icons">
                <a href="{% url 'contact_us' %}" class="text-white small me-3"><i class="fas fa-phone me-1"></i> Contact Us</a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
        </div>
    </div>
    
    <nav class="navbar navbar-expand-lg app-header sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="{% static 'images/karya.jpg' %}" alt="Karyathalo Logo" class="logo-img">
                Karyathalo
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active-link" href="{% url 'index' %}">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'latest_jobs' %}">Latest Jobs</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'about_mission' %}">About</a></li>
                    
                </ul>
                
                <div class="d-flex">
                    <a href="{% url 'user_login' %}" class="btn btn-outline-light me-2">
                        <i class="fa-solid fa-user me-1"></i> User Login
                    </a>
                    <div class="dropdown">
                        <button class="btn btn-login dropdown-toggle" type="button" id="authDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fa-solid fa-lock me-1"></i> Staff
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="authDropdown">
                            <li><a class="dropdown-item" href="{% url 'admin_login' %}"><i class="fa-solid fa-user-shield me-1"></i> Admin Login</a></li>
                            <li><a class="dropdown-item" href="{% url 'recruiter_login' %}"><i class="fa-solid fa-users me-1"></i> Recruiter Login</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
<!-- CHATBOT BUTTON -->
<div id="chatbot-btn" onclick="toggleChatbot()">ðŸ¤–</div>

<!-- CHATBOT WINDOW -->
<div id="chatbot-box">
    <div id="chatbot-header">
        Karyathalo Assistant
        <span onclick="toggleChatbot()" style="float:right;cursor:pointer;">âœ–</span>
    </div>

    <div id="chatbot-messages"></div>

    <div id="chatbot-input-area">
        <input type="text" id="chatbot-input" placeholder="Ask me about jobs..." />
        <button onclick="sendChatbotMessage()">Send</button>
    </div>
</div>
<style>
#chatbot-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #4CAF50;
    color: white;
    font-size: 24px;
    padding: 12px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 9999;
}

#chatbot-box {
    display: none;
    position: fixed;
    bottom: 80px;
    right: 20px;
    width: 300px;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 10px;
    z-index: 9999;
}

#chatbot-header {
    background: #4CAF50;
    color: white;
    padding: 10px;
    border-radius: 10px 10px 0 0;
}

#chatbot-messages {
    height: 250px;
    overflow-y: auto;
    padding: 10px;
    font-size: 14px;
}

#chatbot-input-area {
    display: flex;
    border-top: 1px solid #ccc;
}

#chatbot-input {
    flex: 1;
    padding: 8px;
    border: none;
}

#chatbot-input-area button {
    padding: 8px;
    background: #4CAF50;
    color: white;
    border: none;
}
.user-msg { color: blue; margin: 5px 0; }
.bot-msg { color: green; margin: 5px 0; }
</style>
<script>
const botRules = {
    "hi": "Namaste! Welcome to Karyathalo. Are you looking for a job or looking to hire?",
    "hello": "Namaste! Welcome to Karyathalo. Are you looking for a job or looking to hire?",
    "find job": "Great! We have openings in IT, Marketing, and Construction. What is your skill?",
    "search": "You can search for jobs by typing the role name in the search bar on our homepage.",
    "status": "To check your application status, please log in to your dashboard.",
    "apply": "To apply, click on any job card and hit the 'Apply Now' button.",
    "help": "I can help you find jobs, track applications, or help with account login.",
    "default": "I'm sorry, I didn't quite understand that. Try asking 'find jobs' or 'help'."
};

function toggleChatbot() {
    let box = document.getElementById("chatbot-box");
    box.style.display = box.style.display === "none" ? "block" : "none";
}


function sendChatbotMessage() {
    let input = document.getElementById("chatbot-input");
    let message = input.value.trim().toLowerCase(); 
    if (!message) return;

    let chat = document.getElementById("chatbot-messages");

    chat.innerHTML += `<div class="user-msg"><b>You:</b> ${input.value}</div>`;
    input.value = "";

    chat.scrollTop = chat.scrollHeight;

    let response = botRules["default"]; // Set default

    for (let key in botRules) {
        if (message.includes(key)) {
            response = botRules[key];
            break; 
        }
    }


    setTimeout(() => {
        chat.innerHTML += `<div class="bot-msg"><b>Bot:</b> ${response}</div>`;
        chat.scrollTop = chat.scrollHeight;
    }, 600);
}

// 4. Add "Enter" key support
document.getElementById("chatbot-input")?.addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        sendChatbotMessage();
    }
});


</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>