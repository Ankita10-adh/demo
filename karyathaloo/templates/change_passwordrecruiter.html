{% load static %}

{% block body %}

{% include 'recruiter_navigation.html' %}

<style>
    /* Inherit Recruiter theme colors */
    :root {
        --recruiter-primary: #17a2b8; /* Professional Cyan/Teal */
        --recruiter-secondary: #0c7b93; /* Darker Teal */
        --recruiter-bg: #f4f9fd;
        --recruiter-text: #34495e;
    }

    /* Card container for the form */
    .password-card {
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        padding: 40px;
        max-width: 500px; /* Constrain width for better focus */
        margin: 50px auto;
    }

    /* Form control styling */
    .form-control {
        border-radius: 8px;
        padding: 10px;
        border: 1px solid #ced4da;
        font-size: 1rem;
        margin-bottom: 15px; /* Added spacing between fields */
    }

    .form-label {
        font-weight: 600;
        color: var(--recruiter-text);
        margin-bottom: 5px;
    }

    /* Submit Button Styling */
    .btn-submit {
        background-color: var(--recruiter-primary);
        border: none;
        color: white;
        font-weight: 600;
        padding: 10px 20px;
        border-radius: 8px;
        transition: all 0.3s ease;
        width: 100%;
        margin-top: 15px;
    }

    .btn-submit:hover {
        background-color: var(--recruiter-secondary);
        transform: translateY(-1px);
    }
</style>

<script>
    function checkPass() {
        // Renamed function to modern convention
        const newPassword = document.changepassword.newpassword.value;
        const confirmPassword = document.changepassword.confirmpassword.value;

        if (newPassword !== confirmPassword) {
            alert('Error: New Password and Confirm Password do not match.');
            document.changepassword.confirmpassword.focus();
            return false;
        }
        // Changed to 'true' (lowercase) for correct JavaScript boolean return
        return true; 
    }
</script>

<div class="container">
    <div class="password-card">
        <h3 class="mb-4 text-center text-secondary fw-bold">
            <i class="fa-solid fa-key me-2"></i> Change Account Password
        </h3>
        
        <form method="post" name="changepassword" onsubmit="return checkPass()">
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="currentpassword" class="form-label">Current Password</label>
                <input type="password" class="form-control" id="currentpassword" name="currentpassword" required>
            </div>

            <div class="mb-3">
                <label for="newpassword" class="form-label">New Password</label>
                <input type="password" class="form-control" id="newpassword" name="newpassword" required>
            </div>

            <div class="mb-4">
                <label for="confirmpassword" class="form-label">Confirm New Password</label>
                <input type="password" class="form-control" id="confirmpassword" name="confirmpassword" required>
            </div>

            <button type="submit" class="btn btn-submit">
                <i class="fa-solid fa-floppy-disk me-2"></i> Update Password
            </button>
        </form>
    </div>
</div>

{% if error == "No" %}
<script>
    alert("Success: Your password was changed successfully! You will now be logged out.");
    window.location = "{% url 'Logout' %}";
</script>
{% endif %}

{% if error == "yes" %}
<script>
    alert("Error: Something went wrong during the update. Please try again.");
</script>
{% endif %}

{% if error == "Not" %}
<script>
    alert("Authentication Error: The current password you entered is incorrect.");
</script>
{% endif %}


{% endblock %}